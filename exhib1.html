<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Dissolving Frame</title>
    <link rel="stylesheet" href="exhib1-styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <a class="exhib" href="index.html">< Exhibit 1</a>
            <p class="signature">----- -..- - . .-.. .</p>
        </div>
        <h1 class="title">The Dissolving Frame</h1>
        <canvas id="canvas"></canvas>
        <p class="caption">This image stands intact, yet every second, individual pixels are transformed into random noise, slowly overtaking the original picture. The piece is both a meditation on digital decay and a live demonstration of entropy at work where memory, order, and meaning gradually dissolve into algorithmic chaos.</p>
        <p class="quote">"In a decaying society, art, if it is truthful, must also reflect decay. And unless it wants to break faith with its social function, art must show the world as changeable."</p>
        <p class="quote-author">- Ernst Fischer</p>
    </div>
    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        const img = new Image();
        img.src = "exhib1-img.jpg";

        // Fixed start timestamp (UTC)
        const startTime = new Date("2025-09-27T22:22:00Z").getTime(); 

        // Deterministic PRNG
        function mulberry32(seed) {
        return function() {
            let t = seed += 0x6D2B79F5;
            t = Math.imul(t ^ (t >>> 15), t | 1);
            t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
            return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
        }
        }

        function renderCorruption() {
        ctx.drawImage(img, 0, 0);
        let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        let pixels = imageData.data;

        const now = Date.now();
        const elapsed = Math.floor((now - startTime) / 1000);
        const rng = mulberry32(123456); // fixed seed for deterministic corruption

        for (let i = 0; i < elapsed; i++) {
            const x = Math.floor(rng() * canvas.width);
            const y = Math.floor(rng() * canvas.height);
            const index = (y * canvas.width + x) * 4;

            pixels[index]     = Math.floor(rng() * 256); // R
            pixels[index + 1] = Math.floor(rng() * 256); // G
            pixels[index + 2] = Math.floor(rng() * 256); // B
            pixels[index + 3] = 255;                     // A
        }

        ctx.putImageData(imageData, 0, 0);
        }

        img.onload = () => {
        canvas.width = img.width;
        canvas.height = img.height;

        // Initial render
        renderCorruption();

        // Update page every 2 seconds
        setInterval(renderCorruption, 2000);
        };
    </script>
</body>
</html>